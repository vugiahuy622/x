<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Đăng nhập | RapChieuPhim.vn</title>
  <link rel="stylesheet" href="dangnhap.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>

<body>
  <style>
    body {
      background-image: url("https://cdn2.fptshop.com.vn/unsafe/1920x0/filters:format(webp):quality(75)/2022_8_4_637952330398498003_netflix-1.jpg");
      background-size: cover;
      /* Phủ toàn bộ màn hình */
      background-repeat: no-repeat;
      background-position: center center;
      height: 100vh;
      margin: 0;
    }
  </style>

  <!-- Header -->
  <header class="login-header">
    <div class="header-container">
      <div class="logo">🎬 <span>NETFLIX</span></div>
      <nav class="nav-links">
        <a href="index.html">Trang chủ</a>
        <a href="lichchieu.html">Lịch Chiếu</a>
        <a href="datve.html">Đặt Vé</a>
        <a href="dangky.html">Đăng ký</a>
        <a href="dangnhap.html">Đăng Nhập</a>
      </nav>
    </div>
  </header>


  <!-- Main -->
  <main class="login-main">
    <div class="login-box">
      <h2>🎬 Đăng nhập tài khoản</h2>
      <div>
        <div class="input-group">
          <label for="username">tên</label>
          <input type="text" id="username" placeholder="Nhập tên" required />
        </div>
        <div class="input-group">
          <label for="password">Mật khẩu</label>
          <input type="password" id="password" placeholder="Nhập mật khẩu" required />
        </div>
        <div class="login-form">

          <button id="login-btn" onclick="login()" class="btn">Đăng nhập</button>
          <p class="signup-link">



            Chưa có tài khoản? <a href="dangky.html">Đăng ký</a>
          </p>
        </div>
        </form>



      </div>
  </main>


  <footer class="cinema-footer">
    <div class="footer-container">
      <div class="footer-logo">🎬 <span>NETFLIX</span>
        <div class="footer-links">
          <a href="bai7.html">Trang chủ</a>
          <a href="uudai.html">Ưu đãi</a>
          <a href="#">Liên hệ</a>
        </div>
        <div class="footer-social">
          <a href="#"><i class="fa fa-facebook"></i></a>
          <a href="#"><i class="fa fa-youtube"></i></a>
          <a href="#"><i class="fa fa-instagram"></i></a>
        </div>
        <div class="footer-copy">
          © 2025 RapChieuPhim.vn. Đã đăng ký bản quyền.
        </div>
      </div>
  </footer>


  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script>

    const firebaseConfig = {
      apiKey: "AIzaSyDlne_gt7K1kWxTbBKcAD2Onvy7B8OUcaA",
      authDomain: "vghh-7999b.firebaseapp.com",
      projectId: "vghh-7999b",
      storageBucket: "vghh-7999b.firebasestorage.app",
      messagingSenderId: "374520262209",
      appId: "1:374520262209:web:7118e642efe315baa520c0",
      measurementId: "G-D3ZEDNBQ7C"
    };
    // Khởi tạo Firebase & Firestore
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    document.getElementById("login-btn").addEventListener("click", login);

    function login() {
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();

      if (!username || !password) {
        alert("Vui lòng nhập username và password");
        return;
      }

      if (username == 'admin' && password == 'admin') {
        window.location = 'trangadmin.html'
      }

      db.collection("users")
        .where("username", "==", username)
        .get()
        .then((snapshot) => {
          if (snapshot.empty) {
            alert("Không tìm thấy người dùng nào");
            return;
          }

          // 



          snapshot.forEach((doc) => {
            const userData = doc.data();
            if (userData.password === password) {
              // Lưu thông tin user vào localStorage
              localStorage.setItem("user", JSON.stringify(userData));
              // Chuyển qua trang cá nhân
              window.location.href = "index.html";
            } else {
              alert("Sai mật khẩu!");
            }
          });
        })

        .catch((error) => {
          alert("Đăng nhập thất bại: " + error.message);
          console.error(error);
        });
    }


  </script>


</body>

</html>