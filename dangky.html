<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Đăng ký | RapChieuPhim.vn</title>
  <link rel="stylesheet" href="dky.css" />
</head>

<body>
  <style>
    body {
      background-image: url("https://i0.wp.com/imgs.hipertextual.com/wp-content/uploads/2024/10/netflix-precios.jpg?fit=1200%2C730&quality=70&strip=all&ssl=1");
      background-size: cover;
      /* Phủ toàn bộ màn hình */
      background-repeat: no-repeat;
      background-position: center center;
      height: 100vh;
      margin: 0;
    }
  </style>

  <div class="h">
    <header>
      <div class="logo">🎬 NETFLIX</div>
      <nav>
        <ul>
          <li><a href="index.html">Trang chủ</a></li>
          <li><a href="lichchieu.html">Lịch chiếu</a></li>
          <li><a href="datve.html">Đặt Vé</a></li>
          <li><a href="dangky.html">Đăng Ký</a></li>
          <li><a href="dangnhap.html">Đăng Nhập</a></li>
        </ul>
      </nav>
    </header>
    <br />
    <main>
      <div style="display: flex; justify-content: center">
        <div class="form-container">
          <h2>🎬 Đăng Ký Tài Khoản</h2>

          <form id="registerform">
            <label for="name">Họ và tên</label>
            <input type="text" id="username" placeholder="Nhập họ tên..." required />

            <label for="email">Email</label>
            <input type="email" id="email" placeholder="Nhập email..." required />

            <label for="password">Mật khẩu</label>
            <input type="password" id="password" placeholder="Nhập mật khẩu..." required />


            <button id="saveButton">Đăng ký</button>
            <ul id="userList"></ul>
            <p id="status"></p>

          </form>



          <script>
            document.getElementById('registerform')
              .addEventListener('submit', function (e) {
                e.preventDefault();
                const name = document.getElementById("username").value;
                //console.log(name);

                const email = document.getElementById("email").value;
                //console.log(email);

                const password = document.getElementById("password").value;
                // console.log(password);

                const users = JSON.parse(localStorage.getItem("users") || "[]");

                //if (users.some((user) => user.name === name)) { }

                users.push({ name, password, email });

                localStorage.setItem("users", JSON.stringify(users));

                alert("Đăng Ký Thành Công!");

                document.getElementById("registerform").reset();

              });
          </script>

          <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
          <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

          <script>
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            const firebaseConfig = {
              apiKey: "AIzaSyDlne_gt7K1kWxTbBKcAD2Onvy7B8OUcaA",
              authDomain: "vghh-7999b.firebaseapp.com",
              projectId: "vghh-7999b",
              storageBucket: "vghh-7999b.firebasestorage.app",
              messagingSenderId: "374520262209",
              appId: "1:374520262209:web:7118e642efe315baa520c0",
              measurementId: "G-D3ZEDNBQ7C"
            };
            // ✅ Khởi tạo Firebase & Firestore
            firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();


            // ✅ Lưu người dùng
            document.getElementById("saveButton").addEventListener("click", () => {
              const username = document.getElementById("username").value.trim();
              const email = document.getElementById("email").value.trim();
              const password = document.getElementById("password").value.trim();

              if (!username || !password || !email) {
                alert("Vui lòng nhập đầy đủ username và password");
                return;
              }

              db.collection("users")
                .doc(username)
                .set({ username, password, email })
                .then(() => {
                  document.getElementById("status").innerText = "Lưu thành công!";
                  document.getElementById("username").value = "";
                  document.getElementById("password").value = "";
                  loadUsers(); // 👉 Tải lại danh sách sau khi lưu
                })
                .catch((error) => {
                  document.getElementById("status").innerText =
                    "Lỗi: " + error.message;
                });
            });

          </script>


          <div class="login-link">
            Đã có tài khoản? <a href="dangnhap.html">Đăng nhập</a>
          </div>
        </div>
      </div>
    </main>
    <br /><br />
    <footer class="cinema-footer">
      <div class="footer-container">
        <div class="footer-logo">🎬 <span>NETFLIX</span>
          <div class="footer-links">
            <a href="index.html">Trang chủ</a>
            <a href="uudai.html">Ưu đãi</a>
            <a href="lienhe.html">Liên hệ</a>
          </div>

          <div class="footer-copy">
            © 2025 NETFLIX. All rights reserved.
          </div>
        </div>
    </footer>
  </div>
</body>

</html>